<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="Mario Lukas">
  <link rel="shortcut icon" href="../images/fabscanpi_ICON.png">
  
  <title>F.A.Q - FabScanPi</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">
  <link href="../css/extra.css" rel="stylesheet">
  
  <script>
    // Current page data
    var mkdocs_page_name = "F.A.Q";
    var mkdocs_page_input_path = "faq.md";
    var mkdocs_page_url = "/faq/";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script>
   
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> FabScanPi</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="..">Home</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../news/">News</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../hardware/">Hardware</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../software/">Software</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../examples/">Examples</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../developing/">Developing</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../contributing/">Contributing</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../community/">Community</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 current">
        <a class="current" href="./">F.A.Q</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#software">Software</a></li>
                
            
                <li class="toctree-l3"><a href="#hardware">Hardware</a></li>
                
                    <li><a class="toctree-l4" href="#scanning-issues">Scanning issues</a></li>
                
                    <li><a class="toctree-l4" href="#other">Other</a></li>
                
            
            </ul>
        
    </li>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">FabScanPi</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>F.A.Q</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/mariolukas/FabScanPi-Server/edit/master/docs/faq.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <p><strong><a href="#software">Software</a></strong></p>
<p><strong><a href="#hardware">Hardware</a></strong></p>
<p><strong><a href="#scanningIssues">Scanning Issues</a></strong></p>
<p><strong><a href="#other">Other</a></strong></p>
<hr />
<h1 id="software">Software<a name="software"></a></h1>
<ul>
<li><strong>What username and password do I need for login the FabScanPi?</strong></li>
</ul>
<p>The username / password is the same as in the standard raspbian configuration: </p>
<p>Username: <strong>pi</strong> <br/>
  Password: <strong>raspberry</strong></p>
<p>​</p>
<ul>
<li><strong>Do I have to perform the calibration every time when I restart my FabScanPi?</strong></li>
</ul>
<p>No, the calibration data will be stored. We recommend to perform a calibration every time when the FabScanPi has been shipped, modified or the scan results show signs of deformation.</p>
<p>​</p>
<ul>
<li><strong>The calibrations fails every time. What can I do?</strong></li>
</ul>
<p>The laser and the LED-light are needed for the calibration, they must be installed and be able to work. Make sure the box is closed during calibration so that no external light can cause problems. </p>
<p>​</p>
<ul>
<li><strong>Where can I find the calibration file?</strong></li>
</ul>
<p>You can find it in the folder: <code>/etc/fabscanpi</code></p>
<p>The config file is named : <code>default.config.json</code></p>
<ul>
<li><strong>Where can I find the initial settings of the LED-light, Camera brightness, contrast and saturation?</strong></li>
</ul>
<p>You can find it in the folder: <code>/etc/fabscanpi</code></p>
<p>The config file is named : <code>default.settings.json</code></p>
<p>​</p>
<ul>
<li><strong>Where can I find the log file?</strong></li>
</ul>
<p>You can find it in the folder: <code>/var/log/fabscanpi</code></p>
<p>The config file is named : <code>fabscanpi.log</code></p>
<p>​</p>
<ul>
<li><strong>How can I view the log file?</strong></li>
</ul>
<p>You can see the log file on screen by typing:</p>
<pre><code>cat /var/log/fabscanpi/fabscanpi.log
</code></pre>
<p>​</p>
<ul>
<li><strong>How can I edit the log file?</strong></li>
</ul>
<p>You can edit the log file with the nano editor by typing:</p>
<pre><code>sudo nano /var/log/fabscanpi/fabscanpi.log
</code></pre>
<p>To save the file press "Ctrl+O" followed by "enter".</p>
<p>To exit the nano editor press "Ctrl+X".</p>
<p>​</p>
<ul>
<li><strong>How can I stop / start the FabScanPi server?</strong></li>
</ul>
<p>You can stop the server from the console by typing:</p>
<pre><code>sudo /etc/init.d/fabscanpi-server stop
</code></pre>
<p>or to (re) start:</p>
<pre><code>sudo /etc/init.d/fabscanpi-server stop
</code></pre>
<p>​</p>
<ul>
<li><strong>How can I use the latest (probably unstable) software?</strong></li>
</ul>
<p>You must edit the repository settings in the sources list in the console by typing:</p>
<pre><code> ```sudo nano /etc/apt/sources.list```
</code></pre>
<p>​</p>
<p>Add a new line to the sources.list that it looks exactly like this:</p>
<p><code>deb http://archive.fabscan.org/ testing main</code></p>
<p>​</p>
<p>Add a hash sign (#) in front of the already existing 'fabscan.archive.org' line so that it looks like:</p>
<p><code># deb http://archive.fabscan.org/ jessie main</code> </p>
<p>or</p>
<p><code># deb http://archive.fabscan.org/ stable main</code></p>
<p>INFO: The '#' disables the packet sources in the line</p>
<p>​</p>
<p><img alt="Reboot" src="../images/SourcesList.jpg" /></p>
<p>NOTE: In newer images the entry is called <code>stable</code> instead of <code>jessie</code></p>
<p>This will change the update source to the testing directory. </p>
<p>NOTE: To switch back to the official release you need to remove the # from the 2nd line and place it in front of the 3rd line.</p>
<p>To save your changes press CTRL + O, then ENTER and exit with CTRL + X</p>
<p>​</p>
<p>Now do an update and dist-upgrade:</p>
<pre><code>$ sudo apt-get update
$ sudo apt-get dist-upgrade
</code></pre>
<p>​</p>
<p>Finally you should reboot the FabScanPi:</p>
<pre><code>$ sudo reboot now
</code></pre>
<p>​</p>
<p>Alternatively you can switch off - switch on your FabScanPi</p>
<p>​</p>
<p>NOTE: Now you will use the testing data source. Because it is not officially released there will be NO SUPPORT for this version.</p>
<p>​</p>
<ul>
<li><strong>How can I switch back to an older version (stable) of the software?</strong></li>
</ul>
<p>You must know the number of the older version you want to step back to (e.g.: 0.4.0-b373) :</p>
<p>Open a console (or remote ssh-console).</p>
<p>Type in: <code>sudo apt-get install fabscanpi-server=0.4.0-b373</code></p>
<p>Follow the questions in the installation procedure and finally restart the FabScanPi again.</p>
<p>NOTE: Please make sure you selected the correct packet source in the <code>/etc/apt/sources.list</code></p>
<p>​</p>
<h1 id="hardware">Hardware<a name="hardware"></a></h1>
<ul>
<li><strong>What power source(s) do I need to get my FabScanPi working?</strong></li>
</ul>
<p>The FabScanPi will need 12V DC and 5V DC. There are different options to fulfil this requirement:</p>
<p><strong>Option A:</strong> Connect 12V DC to the HAT (round connector) and install a 12V DC - to - 5V DC regulator on the designated space on the HAT. </p>
<p>NOTE: For details and specifications please consult the hardware chapter.</p>
<p><strong>Option B:</strong> Connect 12V DC to the HAT (round connector) and 5V DC to the raspberry (micro USB                                 connector). </p>
<p>NOTE: Make sure you switch on the both power sources at the same time to avoid software trouble.</p>
<p><strong>Option C:</strong> Connect 12V DC to the HAT (round connector) and connect a 5V DC power source to the 5V pin regulator pin on the HAT. </p>
<p>NOTE: For details and specifications please consult the hardware chapter.</p>
<ul>
<li><strong>What is the rotating direction of the scan table?</strong></li>
</ul>
<p>It should move clockwise – if not please consult the hardware chapter of our documentation and check the connection of your stepper.</p>
<ul>
<li><strong>Which camera will work?</strong></li>
</ul>
<p>FabScan Pi can be built with both Raspberry Pi Camera Modules V 1.x or V 2.x.</p>
<ul>
<li><strong>I have a Raspberry Cam Module with NoIR. Can I use it?</strong></li>
</ul>
<p>There’s no advantage in using the NoIR cam. The algorithms for the laser detection are made for the normal cam. Therefore we recommend to use the normal camera modules.</p>
<ul>
<li><strong>Is the LED-Ring / PCB-board with LEDs mandatory?</strong></li>
</ul>
<p>Yes, because the light is needed to perform the calibration. It is also necessary to archive good quality texture scans.</p>
<ul>
<li><strong>Which LED-ring is compatible?</strong></li>
</ul>
<p>Any ring using WS2812B LEDs (or compatible) will do. To avoid problems with the calibration we suggest using the FabScanPi LED-board.</p>
<ul>
<li><strong>My servo stepper / servo isn't working</strong></li>
</ul>
<p>There is no implementation for the servo/stepper to move the laser until now.</p>
<ul>
<li><strong>No connection to Arduino, how can i fix that?</strong></li>
</ul>
<p>When your FabScanPi-Server version is 0.5.0 and your avrdude version is Version 6.3-20171130 ( check for version with avrdude -v )
   then edit the file <code>/usr/bin/avrdude-autoreset</code> and replace all <code>avrdude-original</code> with <code>avrdude</code>. Upgrade to the newest FabScanpi-Server
   version &gt;= 0.6.0 and you are done. After a restart it should work like usual. 
   Keep in mind that it is more recommended to use the newest version of the image which will include a working fix. </p>
<p>First you need to find out more about the problem. Have a look to the log file (see "How can i view the log file?" in F.A.Q.). 
   Find the section where the init sequence of the server starts. Look for the folowing line ... </p>
<p><code>fabscan.server - INFO - FabScanPi-Server 0.4.2</code></p>
<p>If the next lines look like the the debug output below, the fabscanpi-server is not able to flash the firmware 
   to the FabScanPi-HAT (or Arduino).</p>
<pre><code>fabscan.scanner.laserscanner.FSSerial - ERROR - No FabScanPi HAT or compatible device found on port /dev/ttyAMA0

fabscan.scanner.laserscanner.FSSerial - ERROR - Fatal FabScanPi HAT or compatible connection error....

fabscan.scanner.laserscanner.FSHardwareController - DEBUG - Reset FabScanPi HAT...

fabscan.scanner.laserscanner.FSSerial - ERROR - 'NoneType' object has no attribute 'write'

fabscan.scanner.laserscanner.FSSerial - DEBUG - 'NoneType' object has no attribute 'readline'

fabscan.scanner.laserscanner.FSSerial - ERROR - 'NoneType' object has no attribute 'write'
</code></pre>
<p>If this error occurs by the first run please start reading with 1. In case this error occurs after an fabscanpi-server update 
   and your software worked before, continue reading with 2. </p>
<hr />
<pre><code>  1. First double check the solder joints of the 40-pin Header of the FabScanPi-HAT. If you are sure that there are no 'cold' solder joints move on 
    reading, otherwise resolder those joints. Try again and have a look to the logs. If the error still occurs continue reading with 3.

  2. Check if your fabscanpi-server version is 0.4.2 or higher. Have a look into your default.config.json and check the serial baudrate. It should be 57600 for fabscanpi-server &gt;= 0.4.2. 
    If you changed the baudrate and the error still occurs continue with reading 3.

  3. Your bootloader is bricked, what means that you need to flash a new bootloader to your FabScanPi HAT. Continue with reading "How to flash the FabScanPi HAT Bootloader?"
</code></pre>
<hr />
<ul>
<li><strong>How to flash the FabScanPi HAT Bootloader?</strong></li>
</ul>
<p><strong>Option A: Using Raspberry Pi for flashing.</strong></p>
<p>Connect the FabScanPi HAT pins as described below. (solder some wires to the solder pads). Use a resistor 2k2...5k6 in series for every signal. (see picture for details)</p>
<pre><code>RPi  -&gt; Target
IO25 -&gt; Reset
IO11 -&gt; SCK
IO10 -&gt; MOSI
IO9  -&gt; MISO
GND  -&gt; GND
</code></pre>

<blockquote>
<p><img alt="drawing_400" src="../images/isp_pi_hat.png" />
 Download bootloader:</p>
</blockquote>
<pre><code>$ wget https://github.com/watterott/RPi-UNO-HAT/raw/master/docs/bloader.hex
</code></pre>
<p>Edit the file <code>avrdude.conf</code> and add the following lines:</p>
<pre><code>$ sudo nano /usr/local/etc/avrdude.conf

programmer
  id    = "pi_isp";
  desc  = "GPIO bitbang";
  type  = "linuxgpio";
  reset = 25;
  sck   = 11;
  mosi  = 10;
  miso  = 9;
;
</code></pre>
<p>Flash bootloader:</p>
<pre><code>$ avrdude -c pi_isp -p m328p -e -U flash:w:bloader.hex:i -U lfuse:w:0xFF:m -U hfuse:w:0xD6:m -U efuse:w:0x05:m -U lock:w:0x0F:m
</code></pre>
<p><strong>Option B: Using Arduino Uno (device <code>ttyACM0</code> or <code>ttyUSB0</code>) for flashing.</strong></p>
<p>Connection (Arduino Uno connected to RPi via USB):</p>
<pre><code>Uno -&gt; Target
D10 -&gt; Reset
D13 -&gt; SCK
D11 -&gt; MOSI
D12 -&gt; MISO
GND -&gt; GND
</code></pre>

<p><img alt="drawing_400" src="../images/isp_arduino_hat.png" />
​ <br />
  Download bootloader and ISP firmware:</p>
<pre><code>$ wget https://github.com/watterott/RPi-UNO-HAT/raw/master/docs/bloader.hex
$ wget https://github.com/watterott/RPi-UNO-HAT/raw/master/docs/isp.hex
</code></pre>
<p>Flash ISP firmware to Arduino Uno:</p>
<pre><code>$ avrdude -c arduino -P /dev/ttyUSB0 -b 115200 -p m328p -e -U flash:w:isp.hex:i
</code></pre>
<p>or</p>
<pre><code>$ avrdude -c arduino -P /dev/ttyACM0 -b 115200 -p m328p -e -U flash:w:isp.hex:i
</code></pre>
<p>Flash bootloader:</p>
<pre><code>$ avrdude -c stk500v1 -P /dev/ttyUSB0 -b 19200 -p m328p -e -U flash:w:bloader.hex:i -U lfuse:w:0xFF:m -U hfuse:w:0xD6:m -U efuse:w:0x05:m -U lock:w:0x0F:m
</code></pre>
<p>or</p>
<pre><code>$ avrdude -c stk500v1 -P /dev/ttyACM0 -b 19200 -p m328p -e -U flash:w:bloader.hex:i -U lfuse:w:0xFF:m -U hfuse:w:0xD6:m -U efuse:w:0x05:m -U lock:w:0x0F:m
</code></pre>
<h4 id="scanning-issues">Scanning issues<a name="scanningIssues"></a></h4>
<ul>
<li><strong>My scan looks like a cylinder</strong></li>
</ul>
<table>
<thead>
<tr>
<th><img alt="drawing_400" src="../images/problem_2.png" /></th>
<th><img alt="drawing_400" src="../images/problem_2b.png" /></th>
</tr>
</thead>
<tbody>
<tr>
<td>This is the object.</td>
<td>This is the scan.</td>
</tr>
</tbody>
</table>
<p>The problem occurs when the laser is not aligned vertically. The following pictures show
the disalignment (blue) and how it should be aligned (red).</p>
<table>
<thead>
<tr>
<th><img alt="drawing_400" src="../images/problem_2c.png" /></th>
<th><img alt="drawing_400" src="../images/problem_2d.png" /></th>
</tr>
</thead>
<tbody>
<tr>
<td>Disaligned Laser line</td>
<td>Aligned Laser line.</td>
</tr>
</tbody>
</table>
<p>The solution for this problem is turning the laser module as long as the line hits
the back wall of the scanner vertically. Be sure that the laser also passes the center 
of the turntable ( this can be reached by turning the laser mount)</p>
<ul>
<li><strong>My scan looks doubled</strong></li>
</ul>
<table>
<thead>
<tr>
<th><img alt="drawing_400" src="../images/problem_1.png" /></th>
<th><img alt="drawing_400" src="../images/problem_1b.png" /></th>
</tr>
</thead>
<tbody>
<tr>
<td>This is the object.</td>
<td>This is the scan. The scan looks double.</td>
</tr>
</tbody>
</table>
<p>In this case check the label on your motor. Since the end of 2017 the stepper motor has 400
 steps per full turn. The default config is set to 16x 400 = 6400 steps. If the scan looks like
 on the picture, change the motor steps in the default config to 3200. </p>
<pre><code>   "turntable": {
    "steps": 3200,
    "radius": 70
   }
</code></pre>
<table>
<thead>
<tr>
<th><img alt="drawing_200" src="../images/motor_1.png" /></th>
<th><img alt="drawing_200" src="../images/motor_2.png" /></th>
</tr>
</thead>
<tbody>
<tr>
<td>Motor with 400 steps.</td>
<td>Motor with 200 steps.</td>
</tr>
</tbody>
</table>
<ul>
<li><strong>The turntable is jerking during the scan process what can I do?</strong></li>
</ul>
<p>This behavior is quite normal because every time a new image has been shot the table just moves to the next position. If the table is turning smoothly (clockwise) during scan preview everything should be fine.</p>
<ul>
<li><strong>My scan is cut-off on top and / or bottom. What can I do?</strong></li>
</ul>
<p>Try to optimize your scan results by measuring the "origin_distance" of your calibration sheet. Correct the value in the configuration. Make sure the size of the black squares on your calibration sheet as the same as "square_size" in the calibration file.</p>
<ul>
<li><strong>The texture scan is mirror-inverted.</strong> </li>
</ul>
<p>Check the rotating direction of your turntable (and the connection of the stepper motor). Check and adjust your config-settings for the “dimension”-value.</p>
<ul>
<li><strong>The laser cannot be detected.</strong></li>
</ul>
<p>Make sure your laser adjustment is correct. The laser must pass the scanning table right through the center. If no object is on the table the laser should be visible in the preview image (on the rear wall close to the left border of the image).</p>
<ul>
<li><strong>The scans don’t have the same shape as the original.</strong></li>
</ul>
<p>Check if your laser is aligned in vertical direction. Do another calibration.</p>
<ul>
<li><strong>Calibrations fails / no "Calibration finished" message is displayed</strong></li>
</ul>
<p>Check the starting position of the calibration sheet and make sure your box is closed during the scan. The calibration sheet must be placed with a black square in the upper left corner.</p>
<h4 id="other">Other<a name="other"></a></h4>
<p>tbd.</p>
              
              

            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="../community/" class="btn btn-neutral" title="Community"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
      <p>© Copyright 2015-2016, Mario Lukas</p>
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/mariolukas/FabScanPi-Server" class="icon icon-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../community/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
    </span>
</div>
    <script src="../js/theme.js"></script>
      <script src="../js/main.js"></script>

</body>
</html>
